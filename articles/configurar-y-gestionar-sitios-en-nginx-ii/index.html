<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Configurar  y gestionar sitios en Nginx II - Jonathan Alvarez</title><meta name="description" content="Web Developer highly specialized in frontend Techologies, JavaScript applications, CSS and React. Design enthusiast."><link rel="alternate" href="http://localhost:8080/feed.xml" type="application/rss+xml" title="Jonathan 츼lvarez Gonz치lez is a frontend developer from Colombia. In this site you will find articles and thoughts about web development"><link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>游붐</text></svg>">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/css/utilities.css"><link media="(prefers-color-scheme: dark)" rel="stylesheet" href="/css/dark.css"></head><body class="article"><div class="wrap"><article class="content content--extend"><header class="article-header default-wrap"><div class="article-inner"><nav class="article-author"><a href="/" title="Go home">Jonathan Alvarez</a></nav><h1 class="article-title">Configurar  y gestionar sitios en Nginx II</h1><div class="article-meta"><span>January 24th 2014</span></div></div></header><section class="article-content default-wrap"><p>Continuando, y ahora que tenemos nuestra <a href="http://blog.jonalvarezz.com/configurar-y-gestionar-sitios-en-nginx/">configuraci칩n global para Nginx</a>, veremos c칩mo administrar nuestros<span class="widont">&nbsp;</span>sitios.</p>
<p>Primero creamos dos carpetas sobre el directorio de configuraci칩n de<span class="widont">&nbsp;</span>Nginx</p>
<pre><code>cd /etc/nginx/
mkdir -p sites-available
mkdir -p sites-enabled</code></pre><p>Los nombres de las carpetas describen su funcionalidad. <strong>Esto es importante:</strong> Crearemos un archivo <code>misitio.conf</code> en <code>sites-available</code> por cada sitio que queramos en nuestro<span class="widont">&nbsp;</span>servidor.</p>
<blockquote>
<p>En algunas distribuciones, como Ubuntu, viene un archivo predefinido llamado default. Recomiendo borrarlo y utilizar <code>misitio.conf</code></p>
</blockquote>
<p>De este modo, cada archivo <code>.conf</code> describir치 configuraciones espec칤ficas para cada sitio, por ejemplo incluir o no <code>php</code> o servir como un frontend proxy para usar <code>node</code>, <code>django</code> 칩 dem치s. Nginx es supremamente<span class="widont">&nbsp;</span>flexible.</p>
<p>As칤, un sitio t칤pico con php para Nginx ser칤a: <code>/etc/nginx/sites-available/misitio.conf</code></p>
<pre><code>server {
        listen 80;

    server_name misitio.com;

    root /srv/http/misitio;
    index index.php index.html index.htm;

    # limit_conn limit_per_ip 16; ssi on;
                #location / {
        #  Enables directory listings when index file not found
    # autoindex on; Shows file listing times as local time autoindex_localtime on; Enable for vBulletin usage WITHOUT
    # vbSEO installed try_files $uri $uri/ /index.php; root /usr/share/nginx/html; index index.html index.htm;
                #}

    location / {
            root /srv/http/misitio;
        try_files $uri $uri/ /index.php?$args;
                }
    include /etc/nginx/global/php.conf;
    include /etc/nginx/global/drop.conf;
}</code></pre><p>Aclaremos unas cosas:</p>
<ul>
<li><code>server_name</code> Lleva el dominio, en caso de no tener uno a칰n, usen la <span class="caps">IP</span> del<span class="widont">&nbsp;</span>servidor.</li>
<li><code>root</code> Especifica la ruta del servidor donde se encuentran los archivos del sitio. Es decir que en <code>/srv/http/</code> existe una carpeta de nombre <code>misitio</code> que contiene mis archivos de <code>html</code>, <code>php</code>, <code>css</code> y dem치s. <strong>Usen siempre carpeta por sitio, as칤 solo sea<span class="widont">&nbsp;</span>uno.</strong></li>
<li><code>include</code> Incluye archivos/ m칩dulos adicionales para ese sitio que Nginx deber치 tener en cuenta. Para este caso agregamos el m칩dulo para ejecutar <code>php</code> y algunas excepciones para el servidor en <code>drop.conf</code> que <a href="http://blog.jonalvarezz.com/configurar-y-gestionar-sitios-en-nginx/">antes hab칤amos<span class="widont">&nbsp;</span>definido</a>.</li>
</ul>
<p>El sitio est치 a침adido, habilit칠moslo<span class="widont">&nbsp;</span>entonces:</p>
<pre><code>cd /etc/nginx/sites-enabled/
ln -s ../sites-available/misitio.conf misitio.conf</code></pre><p>Si, s칩lo creamos un enlace simb칩lico a la configuraci칩n del sitio que queremos habilitar. As칤 no perdemos archivos de configuraci칩n cuando queramos dar sitios de<span class="widont">&nbsp;</span>baja.</p>
<p>Y s칩lo por confirmar, definamos permisos sobre la carpeta de nuestro<span class="widont">&nbsp;</span>sitio</p>
<pre><code># chown -hR http:http /srv/http/</code></pre><p>Recuerden cambiar el usuario <code>http</code> por el usuario correcto, por ejemplo en ubuntu deber칤a ser <code>www-data</code>; As칤 mismo la ruta de archivos p칰blicos, que en Ubuntu ser칤a <code>/home/www/public/misitio/</code></p>
<p>Nuestra configuraci칩n esta lista. Verificamos que todo este bien ejecutando <code>nginx -t</code> y reiniciamos el servicio de Nginx con <code>sudo systemctl nginx restart</code>. No deber칤a aparecer alg칰n error, y nuestro sitio deber칤a ser visible desde el dominio especificado en <code>server_name</code>.</p>
</section><aside class="article-share text-center default-wrap"><hr><a href="https://twitter.com/share?text=Configurar%20%20y%20gestionar%20sitios%20en%20Nginx%20II by @jonalvarezz&amp;url=" title="Share on Twitter" onclick="this.href+=window.location.href; window.open(this.href, 'twitter-share', 'width=550,height=330');return false;"><i class="fa fa-twitter"></i></a><a href="https://www.facebook.com/sharer/sharer.php?u=" title="Share on Facebook" onclick="this.href+=window.location.href; window.open(this.href, 'facebook-share', 'width=580,height=330');return false;"><i class="fa fa-facebook"></i></a></aside><footer class="footer-article"><div class="default-wrap"><nav class="article-pagination grid grid--vertical-align"><div class="prev grid-item grid-item--half text-left"><div><small>PREV</small></div><a href="/articles/optimizar-el-rendimiento-y-tiempo-de-carga-de-wordpress-en-5-simples-pasos/">Optimizar el Rendimiento y Tiempo de Carga de Wordpress en 7 pasos</a></div><div class="next grid-item grid-item--half text-right"><div><small>NEXT</small></div><a href="/articles/configurar-y-gestionar-sitios-en-nginx/">Configurar y gestionar sitios en Nginx I</a></div></nav><div class="footer-colophon text-center"><small><a href="/" title="Go home">JONATHAN ALVAREZ</a></small></div></div></footer></article></div><script type="module" src="/scripts/main.js"></script><script>WebFontConfig = {
  google: { families: [ 'Merriweather:400,900:latin', 'Source+Sans+Pro:700' ] }
};
(function() {
  var wf = document.createElement('script');
  wf.src = 'https://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
  wf.type = 'text/javascript';
  wf.async = 'true';
  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(wf, s);
})()</script></body></html>